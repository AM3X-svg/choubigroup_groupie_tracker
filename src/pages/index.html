<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokédex Interactif</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <input type="checkbox" id="toggle-search" class="state-checkbox" style="display: none;" {{if .Query}}checked{{end}}>
    <input type="checkbox" id="toggle-favs" class="state-checkbox" style="display: none;">
    <input type="checkbox" id="toggle-auth" class="state-checkbox" style="display: none;">

    <header class="header">
        <a href="/index">Accueil</a>
        <a href="/collection">Collection</a>
        <a href="/ressources">Ressources</a>
        <a href="/categorie">Catégorie</a>
        <a href="/aPropos">A-Propos</a>
        <label for="toggle-favs" class="header-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart"><path d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"/></svg>
        </label>

        <label for="toggle-auth" class="header-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        </label>
        
        <label for="toggle-search" class="header-icon" style="cursor: pointer;">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
        </label>
    </header>

    <div id="search-overlay" class="search-overlay">
        <div class="search-container">
            <div class="search-top-bar">
                <form action="/" method="get">
                    <input type="text" name="search" placeholder="Nom du Pokémon" value="{{.Query}}">
                    <button type="submit">Rechercher</button>
                </form>
                
                {{if .Query}}
                <a href="/" class="clear-search-btn">Effacer</a>
                {{end}}

                <label for="toggle-search" class="close-btn">&times;</label>
            </div>

            <div class="search-results-box">
                {{if .Query}}
                    <p style="margin-top:10px; font-weight:bold;">Résultats pour "{{.Query}}" :</p>
                {{end}}
            </div>
            <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">
            
            <div class="result-list-container">
                {{range .Pokedex}}
                    <div class="search-sprites">
                        <img src="{{.Sprites.Regular}}">
                        <p>{{.Name.Fr}}</p>
                    </div>
                {{else}}
                    {{if .Query}}
                        <p class="no-result-msg">Aucun Pokémon ne correspond à votre recherche.</p>
                    {{end}}
                {{end}}
            </div>
        </div>
    </div>

    <div id="favs-overlay" class="generic-overlay">
        <div class="modal-box">
            <div class="modal-header">
                <h2>Mes Favoris</h2>
                <label for="toggle-favs" class="close-btn">&times;</label>
            </div>
            <div class="modal-content favs-list">
                {{range .Favorites}}
                    <div class="fav-item">
                        <img src="{{.Sprites.Regular}}" width="60">
                        <span>{{.Name.Fr}}</span>
                    </div>
                {{else}}
                    <p>Vous n'avez pas encore de favoris.</p>
                {{end}}
            </div>
        </div>
    </div>

    <div id="auth-overlay" class="generic-overlay">
        <div class="modal-box auth-box">
            <div class="modal-header">
                <h2>Compte Dresseur</h2>
                <label for="toggle-auth" class="close-btn">&times;</label>
            </div>
            
            <div class="auth-tabs">
                <button type="button" onclick="document.getElementById('form-login').style.display='flex'; document.getElementById('form-register').style.display='none'">Connexion</button>
                <button type="button" onclick="document.getElementById('form-login').style.display='none'; document.getElementById('form-register').style.display='flex'">Inscription</button>
            </div>
            
            <form id="form-login" action="/login" method="POST" class="auth-form">
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit">Se connecter</button>
            </form>

            <form id="form-register" action="/register" method="POST" class="auth-form" style="display:none;">
                <input type="text" name="username" placeholder="Pseudo de Dresseur" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Mot de passe" required>
                <button type="submit">Créer mon compte</button>
            </form>
        </div>
    </div>

    <main class="main">
        <div class="hero-container">
            <input type="radio" name="screen-selector" id="screen-1" checked style="display:none;">
            <input type="radio" name="screen-selector" id="screen-2" style="display:none;">

            <div id="accueil-screen" class="screen">
                <div class="pokemon-display-area">
                    {{with .RandomPokemon}}
                    <img src="{{.Sprites.Regular}}" alt="Image de {{.Name.Fr}}" class="random-pokemon-img">
                    <p class="random-pokemon-name">{{.Name.Jp}}<br>{{.Name.Fr}} </p>
                    {{end}}
                    <a href="/" class="new-pokemon-btn">Random Pokémon</a>
                </div>

                <div class="txt">
                    <p>Bienvenue dans le Pokédex interactif ! <br>
                        Ici, tu vas pouvoir explorer l’univers incroyable des Pokémon grâce à l’API Tyradex. <br>
                        Découvre les fiches détaillées de chaque Pokémon, leurs formes régionales, et parcoure les différentes générations.</p>
                </div>
            </div>
            
            <div id="univers-screen" class="screen">
                <div class="univers-card main-card">
                    <div class="card-controls">
                        <label for="screen-1" class="close-icon lucide-x-icon" style="cursor:pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        </label>
                        <h2 class="card-title">Présentation de l'Univers</h2>
                        <span class="next-icon lucide-arrow-up-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up"><path d="m5 12 7-7 7 7"/><path d="M12 19V5"/></svg>
                        </span>
                    </div>
                    <p class="card-content">L'univers que nous avons choisi est celui de Pokémon, un monde riche et iconique qui mélange créatures fantastiques, aventure, stratégie et collection. Depuis plus de 25 ans, Pokémon s'est imposé comme un univers complet, comprenant jeux vidéo, séries animées, films, produits dérivés et, surtout, un jeu de cartes à collectionner devenu mondialement populaire. Cet univers est particulièrement intéressant à exploiter car il repose sur une identité visuelle forte, des créatures variées et reconnaissables, ainsi qu'un système de classification clair (types, séries, raretés, extensions...).</p>
                </div>

                <div class="side-cards-wrapper">
                    <div class="side-card-top">
                        <p>Pour enrichir ce projet avec des données réelles et structurées, j'ai exploité l'API Pokémon TCG. Cette API donne accès à un ensemble complet d'informations provenant du jeu de cartes officiel.</p>
                    </div>
                    

                    <div class="documentation-link">
                        <img src="/static/images/logo.png" class="doc-icon" alt="API Logo" style="max-width: 40px;">
                        <div class="doc-info">
                            <a href="https://tyradex.vercel.app/docs" target="_blank">Documentation officielle</a>
                        </div>
                        <span class="time-stamp">9:41 AM</span>
                    </div>


                    <div class="side-card-bottom-description">
                        <p>Elle détaille l'ensemble des fonctionnalités, les paramètres, les formats de réponse.</p>
                    </div>
                </div>
            </div>

            <div class="univers-slider">
                <label for="screen-1" class="slider-dot"></label>
                <label for="screen-2" class="slider-dot"></label>
            </div>
        </div>
    </main>
</body>
</html>